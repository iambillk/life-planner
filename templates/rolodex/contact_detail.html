{% extends "base.html" %}
{% block title %}{{ contact.display_name }} Â· Rolodex{% endblock %}

{% block content %}
<style>
  /* Force small profile photo */
  .profile-photo img {
    width: 80px !important;
    height: 80px !important;
    max-width: 80px !important;
    max-height: 80px !important;
    object-fit: cover !important;
    border-radius: 50% !important;
  }
  
  /* Business card photo */
  .business-card img {
    max-width: 400px !important;
    height: auto !important;
    cursor: pointer;
    border-radius: 8px;
  }
</style>

<div style="padding: 20px; max-width: 1000px; margin: 0 auto;">
  <!-- Back link -->
  <div style="margin-bottom: 20px;">
    <a href="{{ url_for('rolodex.contacts') }}" style="color: var(--text-muted); text-decoration: none;">
      â† Back to Contacts
    </a>
  </div>

  <!-- Header -->
  <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 30px; gap: 20px;">
    <div style="display: flex; gap: 16px; align-items: center;">
      <div class="profile-photo">
        {% if contact.profile_photo %}
          <img src="{{ url_for('static', filename='contact_photos/' + contact.profile_photo) }}" alt="{{ contact.display_name }}">
        {% else %}
          <div style="width: 80px; height: 80px; border-radius: 50%; background: linear-gradient(135deg, #667eea, #764ba2); display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 24px;">
            {{ contact.display_name[0]|upper if contact.display_name else '?' }}
          </div>
        {% endif %}
      </div>
      
      <div>
        <h1 style="margin: 0; font-size: 28px; color: var(--text);">
          {{ contact.display_name }}
        </h1>
        {% if contact.title or contact.company %}
        <p style="margin: 4px 0; color: var(--text-muted); font-size: 14px;">
          {% if contact.title %}{{ contact.title }}{% endif %}
          {% if contact.title and contact.company %} at {% endif %}
          {% if contact.company %}
            <a href="{{ url_for('rolodex.company_detail', id=contact.company.id) }}" style="color: var(--primary); text-decoration: none;">
              {{ contact.company.name }}
            </a>
          {% endif %}
        </p>
        {% endif %}
        {% if contact.tags %}
        <div style="margin-top: 8px;">
          {% for tag in contact.tags.split(',') %}
          <span style="display: inline-block; padding: 2px 8px; background: rgba(139,92,246,0.2); color: #a78bfa; border-radius: 4px; font-size: 11px; margin-right: 4px;">
            {{ tag.strip() }}
          </span>
          {% endfor %}
        </div>
        {% endif %}
      </div>
    </div>
    
    <div style="display: flex; gap: 8px;">
      <a href="{{ url_for('rolodex.contact_edit', id=contact.id) }}" 
         style="padding: 8px 16px; background: var(--primary); color: white; text-decoration: none; border-radius: 6px;">
        Edit
      </a>
      <form method="POST" action="{{ url_for('rolodex.contact_delete', id=contact.id) }}" 
            style="display: inline;" 
            onsubmit="return confirm('Delete this contact?');">
        <button type="submit" 
                style="padding: 8px 16px; background: var(--danger); color: white; border: none; border-radius: 6px; cursor: pointer;">
          Delete
        </button>
      </form>
    </div>
  </div>

  <!-- Basic Information -->
  <div style="background: var(--card); border: 1px solid var(--line); border-radius: 8px; padding: 20px; margin-bottom: 20px;">
    <h3 style="margin: 0 0 16px 0; font-size: 16px; color: var(--text);">
      ğŸ‘¤ Basic Information
    </h3>
    
    <div style="display: grid; gap: 12px;">
      {% if contact.first_name or contact.last_name %}
      <div style="display: flex; gap: 12px;">
        <span style="color: var(--text-muted); width: 120px;">Full Name:</span>
        <span>{{ contact.first_name or '' }} {{ contact.last_name or '' }}</span>
      </div>
      {% endif %}
      
      <div style="display: flex; gap: 12px;">
        <span style="color: var(--text-muted); width: 120px;">Display Name:</span>
        <span>{{ contact.display_name }}</span>
      </div>
      
      {% if contact.title %}
      <div style="display: flex; gap: 12px;">
        <span style="color: var(--text-muted); width: 120px;">Title:</span>
        <span>{{ contact.title }}</span>
      </div>
      {% endif %}
      
      {% if contact.company %}
      <div style="display: flex; gap: 12px;">
        <span style="color: var(--text-muted); width: 120px;">Company:</span>
        <a href="{{ url_for('rolodex.company_detail', id=contact.company.id) }}" style="color: var(--primary); text-decoration: none;">
          {{ contact.company.name }}
        </a>
      </div>
      {% endif %}
    </div>
  </div>

  <!-- Contact Information -->
  <div style="background: var(--card); border: 1px solid var(--line); border-radius: 8px; padding: 20px; margin-bottom: 20px;">
    <h3 style="margin: 0 0 16px 0; font-size: 16px; color: var(--text);">
      ğŸ“ Contact Methods
    </h3>
    
    <div style="display: grid; gap: 12px;">
      {% if contact.email %}
      <div style="display: flex; gap: 12px;">
        <span style="color: var(--text-muted); width: 120px;">ğŸ“§ Email:</span>
        <a href="mailto:{{ contact.email }}" style="color: var(--primary); text-decoration: none;">
          {{ contact.email }}
        </a>
      </div>
      {% endif %}
      
      {% if contact.personal_email %}
      <div style="display: flex; gap: 12px;">
        <span style="color: var(--text-muted); width: 120px;">âœ‰ï¸ Personal:</span>
        <a href="mailto:{{ contact.personal_email }}" style="color: var(--primary); text-decoration: none;">
          {{ contact.personal_email }}
        </a>
      </div>
      {% endif %}
      
      {% if contact.phone %}
      <div style="display: flex; gap: 12px;">
        <span style="color: var(--text-muted); width: 120px;">â˜ï¸ Phone:</span>
        <a href="tel:{{ contact.phone }}" style="color: var(--text); text-decoration: none;">
          {{ contact.phone }}
        </a>
      </div>
      {% endif %}
      
      {% if contact.mobile_phone %}
      <div style="display: flex; gap: 12px;">
        <span style="color: var(--text-muted); width: 120px;">ğŸ“± Mobile:</span>
        <a href="tel:{{ contact.mobile_phone }}" style="color: var(--text); text-decoration: none;">
          {{ contact.mobile_phone }}
        </a>
      </div>
      {% endif %}
      
      {% if contact.work_phone %}
      <div style="display: flex; gap: 12px;">
        <span style="color: var(--text-muted); width: 120px;">ğŸ’¼ Work:</span>
        <a href="tel:{{ contact.work_phone }}" style="color: var(--text); text-decoration: none;">
          {{ contact.work_phone }}
        </a>
      </div>
      {% endif %}
      
      {% if contact.home_phone %}
      <div style="display: flex; gap: 12px;">
        <span style="color: var(--text-muted); width: 120px;">ğŸ  Home:</span>
        <a href="tel:{{ contact.home_phone }}" style="color: var(--text); text-decoration: none;">
          {{ contact.home_phone }}
        </a>
      </div>
      {% endif %}
      
      {% if contact.website %}
      <div style="display: flex; gap: 12px;">
        <span style="color: var(--text-muted); width: 120px;">ğŸŒ Website:</span>
        <a href="{{ contact.website }}" target="_blank" style="color: var(--primary); text-decoration: none;">
          {{ contact.website }}
        </a>
      </div>
      {% endif %}
      
      {% if not (contact.email or contact.phone or contact.mobile_phone or contact.work_phone or contact.home_phone or contact.personal_email or contact.website) %}
      <span style="color: var(--text-muted); font-style: italic;">No contact information provided</span>
      {% endif %}
    </div>
  </div>

  <!-- Address if exists -->
  {% if contact.street_address or contact.city or contact.state or contact.zip_code %}
  <div style="background: var(--card); border: 1px solid var(--line); border-radius: 8px; padding: 20px; margin-bottom: 20px;">
    <h3 style="margin: 0 0 16px 0; font-size: 16px; color: var(--text);">
      ğŸ“ Address
    </h3>
    
    <div>
      {% if contact.street_address %}{{ contact.street_address }}<br>{% endif %}
      {% if contact.address_line_2 %}{{ contact.address_line_2 }}<br>{% endif %}
      {% if contact.city or contact.state or contact.zip_code %}
        {{ contact.city }}{% if contact.city and contact.state %}, {% endif %}
        {{ contact.state }} {{ contact.zip_code }}
      {% endif %}
      {% if contact.country %}<br>{{ contact.country }}{% endif %}
    </div>
  </div>
  {% endif %}

  <!-- Social Media if exists -->
  {% if contact.linkedin_url or contact.twitter_url or contact.facebook_url or contact.instagram_url or contact.github_url %}
  <div style="background: var(--card); border: 1px solid var(--line); border-radius: 8px; padding: 20px; margin-bottom: 20px;">
    <h3 style="margin: 0 0 16px 0; font-size: 16px; color: var(--text);">
      ğŸ”— Social Media
    </h3>
    
    <div style="display: flex; gap: 12px; flex-wrap: wrap;">
      {% if contact.linkedin_url %}
        <a href="{{ contact.linkedin_url }}" target="_blank" 
           style="padding: 6px 12px; background: #0077b5; color: white; text-decoration: none; border-radius: 4px; font-size: 13px;">
          LinkedIn
        </a>
      {% endif %}
      {% if contact.twitter_url %}
        <a href="{{ contact.twitter_url }}" target="_blank" 
           style="padding: 6px 12px; background: #1da1f2; color: white; text-decoration: none; border-radius: 4px; font-size: 13px;">
          Twitter
        </a>
      {% endif %}
      {% if contact.facebook_url %}
        <a href="{{ contact.facebook_url }}" target="_blank" 
           style="padding: 6px 12px; background: #1877f2; color: white; text-decoration: none; border-radius: 4px; font-size: 13px;">
          Facebook
        </a>
      {% endif %}
      {% if contact.instagram_url %}
        <a href="{{ contact.instagram_url }}" target="_blank" 
           style="padding: 6px 12px; background: #e4405f; color: white; text-decoration: none; border-radius: 4px; font-size: 13px;">
          Instagram
        </a>
      {% endif %}
      {% if contact.github_url %}
        <a href="{{ contact.github_url }}" target="_blank" 
           style="padding: 6px 12px; background: #333; color: white; text-decoration: none; border-radius: 4px; font-size: 13px;">
          GitHub
        </a>
      {% endif %}
    </div>
  </div>
  {% endif %}

  <!-- Personal Info if exists -->
  {% if contact.birthday or contact.anniversary or contact.spouse_name or contact.children_names or contact.assistant_name %}
  <div style="background: var(--card); border: 1px solid var(--line); border-radius: 8px; padding: 20px; margin-bottom: 20px;">
    <h3 style="margin: 0 0 16px 0; font-size: 16px; color: var(--text);">
      ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Personal Information
    </h3>
    
    <div style="display: grid; gap: 12px;">
      {% if contact.birthday %}
      <div style="display: flex; gap: 12px;">
        <span style="color: var(--text-muted); width: 120px;">ğŸ‚ Birthday:</span>
        <span>{{ contact.birthday.strftime('%B %d, %Y') }}</span>
      </div>
      {% endif %}
      
      {% if contact.anniversary %}
      <div style="display: flex; gap: 12px;">
        <span style="color: var(--text-muted); width: 120px;">ğŸ’‘ Anniversary:</span>
        <span>{{ contact.anniversary.strftime('%B %d, %Y') }}</span>
      </div>
      {% endif %}
      
      {% if contact.spouse_name %}
      <div style="display: flex; gap: 12px;">
        <span style="color: var(--text-muted); width: 120px;">ğŸ’ Spouse:</span>
        <span>{{ contact.spouse_name }}</span>
      </div>
      {% endif %}
      
      {% if contact.children_names %}
      <div style="display: flex; gap: 12px;">
        <span style="color: var(--text-muted); width: 120px;">ğŸ‘¶ Children:</span>
        <span>{{ contact.children_names }}</span>
      </div>
      {% endif %}
      
      {% if contact.assistant_name %}
      <div style="display: flex; gap: 12px;">
        <span style="color: var(--text-muted); width: 120px;">ğŸ‘¤ Assistant:</span>
        <span>{{ contact.assistant_name }}</span>
      </div>
      {% endif %}
    </div>
  </div>
  {% endif %}

  <!-- Business Card if exists -->
  {% if contact.business_card_photo %}
  <div style="background: var(--card); border: 1px solid var(--line); border-radius: 8px; padding: 20px; margin-bottom: 20px;">
    <h3 style="margin: 0 0 16px 0; font-size: 16px; color: var(--text);">
      ğŸ’¼ Business Card
    </h3>
    <div class="business-card" style="text-align: center;">
      <img src="{{ url_for('static', filename='contact_photos/' + contact.business_card_photo) }}" 
           alt="Business Card"
           onclick="window.open(this.src, '_blank')">
    </div>
  </div>
  {% endif %}

  <!-- Notes if exists -->
  {% if contact.notes %}
  <div style="background: var(--card); border: 1px solid var(--line); border-radius: 8px; padding: 20px; margin-bottom: 20px;">
    <h3 style="margin: 0 0 12px 0; font-size: 16px; color: var(--text);">
      ğŸ“ Notes
    </h3>
    <div style="white-space: pre-wrap; color: var(--text); line-height: 1.5;">{{ contact.notes }}</div>
  </div>
  {% endif %}

  <!-- Metadata -->
  <div style="background: var(--card); border: 1px solid var(--line); border-radius: 8px; padding: 20px;">
    <h3 style="margin: 0 0 12px 0; font-size: 16px; color: var(--text);">
      â„¹ï¸ Record Information
    </h3>
    <div style="display: grid; gap: 8px; font-size: 13px;">
      <div>
        <span style="color: var(--text-muted);">Created:</span>
        <span style="margin-left: 8px;">{{ contact.created_at.strftime('%B %d, %Y at %I:%M %p') if contact.created_at else 'Unknown' }}</span>
      </div>
      <div>
        <span style="color: var(--text-muted);">Updated:</span>
        <span style="margin-left: 8px;">{{ contact.updated_at.strftime('%B %d, %Y at %I:%M %p') if contact.updated_at else 'Never' }}</span>
      </div>
    </div>
  </div>
</div>
{% endblock %}